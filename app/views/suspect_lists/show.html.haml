.wrapper
  = render 'shared/admin_sidebar'
  .main-panel
    = render 'shared/admin_dashboard_navbar'
    .content{style: 'margin-top: 0px;'}
      .container-fluid
        = render 'shared/flash_messages'
        .row
          .col-lg-12.col-md-12
            .card
              .card-header
                %h4.card-title
                  = "#{@suspect_list.name}"
                  .pull-right
                    %ul.list-inline
                      %li.list-inline-item
                        = button_to images_download_suspect_list_path(@suspect_list), method: :post, data: { "no-turbolink" => true }, class: 'btn btn-default' do
                          %i.fa.fa-download
                          Download Images
                        -#
                          %a{href: images_download_suspect_list_path(@suspect_list), method: :post, data: { "no-turbolink" => true }, class: 'btn btn-default'}
                            %i.fa.fa-download
                            Download
                      %li.list-inline-item
                        %a{href: edit_suspect_list_path(@suspect_list), class: 'btn btn-primary'}
                          %i.fa.fa-pencil-square-o
                          Edit
                = "#{pluralize(number_with_delimiter(@number_of_table_rows), 'row')}" unless @number_of_table_rows.blank?
              .card-body
                - unless @csv_table.blank?
                  .table-responsive
                    %table.table
                      %tr
                        %th
                        - @headers.each do |header|
                          %th= header
                        - @csv_table.each_with_index do |row, index|
                          %tr.accordion-toggle.collapsed{"data-toggle" => "collapse", :href => "##{index}_details"}
                            %td.expand-button.text-primary
                            - row.each do |element|
                              %td= element[1]
                          %tr.hide-table-padding
                            %td{:colspan => "100"}
                              .collapse.in{id: "#{index}_details"}
                                - images = Image.find(:all, :params => { ticket_nbr: row.first[1]})
                                %ul.list-inline
                                  - images.each do |image|
                                    %li.list-inline-item
                                      %a{href: image_path(image.capture_seq_nbr)}
                                        =# image_tag("#{request.protocol}#{request.host}#{image.thumbnail_url}", alt: image.capture_seq_nbr, class: 'img img-fluid')
                                        = image_tag(image.thumbnail_url, alt: image.capture_seq_nbr, class: 'img img-fluid')

              .card-footer
                %a{href: suspect_lists_path}
                  %i.fa.fa-angle-left
                  Back
                = paginate @csv_table
                .pull-right
                  = link_to "<i class='fa fa-trash'></i> Delete".html_safe, @suspect_list, :method => :delete, class: 'btn btn-danger btn-sm', :data => { :confirm => 'Are you sure you want to delete this Suspect List?' }